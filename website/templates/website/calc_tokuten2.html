{% load static %}
<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chart.js + Vue (å›ºå®šè»¸å¯¾å¿œ)</title>
    <!-- Vue3 CDN -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
     <!-- Chart.js CDN -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
  <!-- Chart.js Annotation pluginï¼ˆChart.jsã®å¾Œã«å¿…ãšèª­ã¿è¾¼ã‚€ï¼‰ -->
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@1.1.0"></script>
  <link rel="stylesheet" href="{% static 'website/css/calc_tokuten2.css' %}">
  </head>
  <body>
    {% verbatim %}
    <div id="app" class="container">
      <!-- å·¦ãƒ‘ãƒãƒ« -->
      <div class="left-panel">
        <h2>ğŸ“Š å…¥åŠ›</h2>
        <div>
          <label>ãƒœãƒ¼ãƒ€ãƒ¼:</label>
          <input
            type="number"
            v-model.number="borderValue"
            min="0"
            max="13"
            step="0.01"
          />
        </div>
        <div v-for="(add, i) in adds" :key="i" style="margin-top: 10px">
          <label>{{ i+1 }} å·è‰‡ãƒ»ç€é †ç‚¹ : </label>
          <select v-model.number="adds[i].value">
            <option value="">æœªé¸æŠ</option>
            <option v-for="n in 12" :key="n" :value="n">{{ n }}</option>
          </select>
          <br />

           <label>å¯¾è±¡é¸æ‰‹ : </label>
          <select v-model="adds[i].target">
            <option value="">æœªé¸æŠ</option>
           <option v-for="name in nameOptions" :key="name" :value="name">
              {{ name }}
            </option>
          </select>

        </div>
          <!-- â–¼ åˆæ ¼ãƒ©ã‚¤ãƒ³è¨ˆç®—ç”¨ã®UIã‚’å·¦ãƒ‘ãƒãƒ«ä¸‹éƒ¨ã«è¿½åŠ  -->
      <hr style="margin: 15px 0; border-color: #444;" />
      <div>
        <label>å¯¾è±¡é¸æ‰‹ (åˆæ ¼ãƒ©ã‚¤ãƒ³è¨ˆç®—):</label>
        <select v-model="selectedPlayer">
          <option value="">æœªé¸æŠ</option>
          <option v-for="name in nameOptions" :key="name" :value="name">
            {{ name }}
          </option>
        </select>
      </div>
      <div style="margin-top: 8px;">
        <label>æ®‹ã‚Šå‡ºèµ°å›æ•°:</label>
        <select v-model.number="remainingRaces">
          <option :value="1">1</option>
          <option :value="2">2</option>
        </select>
      </div>

<div v-if="selectedPlayer" style="margin-top: 8px;">
        <span :style="requiredPointsText.includes('ç„¡äº‹æ•…å½“ç¢º') ? 'color: limegreen; font-weight: bold;' : 'color: #fff;'">
          å¿…è¦å¾—ç‚¹: {{ requiredPointsText }}
        </span>
      </div>




      </div>

      <!-- å³ãƒ‘ãƒãƒ« -->
      <div class="right-panel">
        <div
          style="
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
          "
        >
          <div>
            <h2>ğŸ“ˆ å¾—ç‚¹ç‡ä¸€è¦§è¡¨</h2>
            <p style="font-size: 12px; color: #fff">{{ currentTime }}</p>
          </div>
          <div>
            <!-- <button @click="updateData">æ›´æ–°</button> -->
            <button @click="toggleSort">
              {{ sortOrder ? "å…ƒã«æˆ»ã™ â†º" : "é™é † â–¼" }}
            </button>
          </div>
        </div>

        <div class="chart-wrapper">
          <!-- ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«é ˜åŸŸ -->
          <div class="chart-scroll-area">
            <div class="chart-container">
              <canvas id="myChart"></canvas>
            </div>
          </div>
          <!-- å›ºå®šè»¸ -->
          <div class="chart-fixed-axis">
            <canvas id="axisChart"></canvas>
          </div>
        </div>
      </div>
    </div>
    {% endverbatim %} 


    {{ df_data|json_script:'data-json' }}
    <script src="{% static 'website/js/calc_tokuten2.js' %}"></script>
  </body>
</html>
